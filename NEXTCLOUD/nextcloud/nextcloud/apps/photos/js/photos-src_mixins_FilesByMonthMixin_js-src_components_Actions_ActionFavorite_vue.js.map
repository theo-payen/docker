{"version":3,"file":"photos-src_mixins_FilesByMonthMixin_js-src_components_Actions_ActionFavorite_vue.js?v=7659ba51a5dcfe80a2c0","mappings":";6sCAsBA,SACCA,KAAM,oBAENC,SAAU,CAITC,eAAc,WAAG,IAEwB,EAFxB,OACVC,EAAe,CAAC,EAAC,IACFC,KAAKC,gBAAc,IAAxC,IAAK,EAAL,qBAA0C,KAE/B,EAFAC,EAAM,QACVC,EAAOH,KAAKI,MAAMF,GACxB,GAAIC,EACHJ,EAAaI,EAAKE,OAAiC,QAA3B,EAAGN,EAAaI,EAAKE,cAAM,QAAI,GACvDN,EAAaI,EAAKE,OAAOC,KAAKH,EAAKI,OAErC,CAEA,+BAIA,OAHAC,OAAOC,KAAKV,GACVW,SAAQ,SAAAL,GAAK,OAAIN,EAAaM,GAAOM,KAAK,EAAKC,qBAAqB,IAE/Db,CACR,EAKAc,WAAU,WACT,OAAOL,OACLC,KAAKT,KAAKF,gBACVa,MAAK,SAACG,EAAQC,GAAM,OAAKD,EAASC,GAAU,EAAI,CAAC,GACpD,GAGDC,QAAS,CAMRJ,qBAAoB,SAACK,EAASC,GAC7B,OAAOlB,KAAKI,MAAMa,GAASE,UAAYnB,KAAKI,MAAMc,GAASC,WAAa,EAAI,CAC7E,sCChEF,wRCuCA,gmGAAAC,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,ssDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,szBAAAA,EAAA,EAAAA,EAAA,iBAAAA,IAAA,uBAAAA,GAAA,UAAAA,GAAA,GAAAA,EAAA,4XAKA,MC5CqL,ED4CrL,CACAxB,KAAAA,iBACAyB,WAAAA,CACAC,KAAAA,EAAAA,QACAC,eAAAA,EAAAA,IAGAC,MAAAA,CACAC,gBAAAA,CACAC,KAAAA,MACAC,UAAAA,IAIA9B,SAAAA,EAAAA,EAAAA,CAAAA,GACA+B,EAAAA,EAAAA,IAAAA,CACA,WACA,IAGAC,wBAAAA,WAAA,WAEA,+EACA,IAGAb,QAAAA,EAAAA,EAAAA,CAAAA,GACAc,EAAAA,EAAAA,IAAAA,CACA,4BACA,IAEAC,kBAAAA,WAAA,4HACA,0BAAAC,QAAAA,EAAAA,gBAAAC,cAAAA,IAAA,0CADA,EAEA,EAEAC,oBAAAA,WAAA,4HACA,0BAAAF,QAAAA,EAAAA,gBAAAC,cAAAA,IAAA,0CADA,EAEA,KE/DA,SAXgB,cACd,GHRW,WAAkB,IAAIE,EAAInC,KAAKoC,EAAGD,EAAIE,MAAMD,GAAG,OAAQD,EAAIN,wBAAyBO,EAAG,iBAAiB,CAACE,MAAM,CAAC,qBAAoB,EAAK,aAAaH,EAAII,EAAE,SAAU,+BAA+BC,GAAG,CAAC,MAAQL,EAAIJ,oBAAoB,CAACI,EAAIM,GAAG,OAAON,EAAIO,GAAGP,EAAII,EAAE,SAAU,+BAA+B,QAAQH,EAAG,OAAO,CAACE,MAAM,CAAC,KAAO,QAAQK,KAAK,UAAU,GAAGP,EAAG,iBAAiB,CAACE,MAAM,CAAC,qBAAoB,EAAK,aAAaH,EAAII,EAAE,SAAU,oCAAoCC,GAAG,CAAC,MAAQL,EAAID,sBAAsB,CAACC,EAAIM,GAAG,OAAON,EAAIO,GAAGP,EAAII,EAAE,SAAU,oCAAoC,QAAQH,EAAG,OAAO,CAACE,MAAM,CAAC,KAAO,QAAQK,KAAK,UAAU,EACppB,GACsB,IGSpB,EACA,KACA,KACA,MAI8B","sources":["webpack:///photos/src/mixins/FilesByMonthMixin.js","webpack://photos/./src/components/Actions/ActionFavorite.vue?537d","webpack:///photos/src/components/Actions/ActionFavorite.vue","webpack:///photos/src/components/Actions/ActionFavorite.vue?vue&type=script&lang=js&","webpack://photos/./src/components/Actions/ActionFavorite.vue?4be4"],"sourcesContent":["/**\n * @copyright Copyright (c) 2022 Louis Chemineau <louis@chmn.me>\n *\n * @author Louis Chemineau <louis@chmn.me>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default {\n\tname: 'FilesByMonthMixin',\n\n\tcomputed: {\n\t\t/**\n\t\t * @return {object<String, []>}\n\t\t */\n\t\tfileIdsByMonth() {\n\t\t\tconst filesByMonth = {}\n\t\t\tfor (const fileId of this.fetchedFileIds) {\n\t\t\t\tconst file = this.files[fileId]\n\t\t\t\tif (file) {\n\t\t\t\t\tfilesByMonth[file.month] = filesByMonth[file.month] ?? []\n\t\t\t\t\tfilesByMonth[file.month].push(file.fileid)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Sort files in sections.\n\t\t\tObject.keys(filesByMonth)\n\t\t\t\t.forEach(month => filesByMonth[month].sort(this.sortFilesByTimestamp))\n\n\t\t\treturn filesByMonth\n\t\t},\n\n\t\t/**\n\t\t * @return {string[]}\n\t\t */\n\t\tmonthsList() {\n\t\t\treturn Object\n\t\t\t\t.keys(this.fileIdsByMonth)\n\t\t\t\t.sort((month1, month2) => month1 > month2 ? -1 : 1)\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * @param {string} fileId1 The first file ID\n\t\t * @param {string} fileId2 The second file ID\n\t\t * @return {-1 | 1}\n\t\t */\n\t\tsortFilesByTimestamp(fileId1, fileId2) {\n\t\t\treturn this.files[fileId1].timestamp > this.files[fileId2].timestamp ? -1 : 1\n\t\t},\n\t},\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.shouldFavoriteSelection)?_c('NcActionButton',{attrs:{\"close-after-click\":true,\"aria-label\":_vm.t('photos', 'Mark selection as favorite')},on:{\"click\":_vm.favoriteSelection}},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('photos', 'Add selection to favorites'))+\"\\n\\t\"),_c('Star',{attrs:{\"slot\":\"icon\"},slot:\"icon\"})],1):_c('NcActionButton',{attrs:{\"close-after-click\":true,\"aria-label\":_vm.t('photos', 'Remove selection from favorites')},on:{\"click\":_vm.unFavoriteSelection}},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('photos', 'Remove selection from favorites'))+\"\\n\\t\"),_c('Star',{attrs:{\"slot\":\"icon\"},slot:\"icon\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n - @copyright Copyright (c) 2022 Louis Chemineau <louis@chmn.me>\n -\n - @author Louis Chemineau <louis@chmn.me>\n -\n - @license AGPL-3.0-or-later\n -\n - This program is free software: you can redistribute it and/or modify\n - it under the terms of the GNU Affero General Public License as\n - published by the Free Software Foundation, either version 3 of the\n - License, or (at your option) any later version.\n -\n - This program is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n - GNU Affero General Public License for more details.\n -\n - You should have received a copy of the GNU Affero General Public License\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\n -\n -->\n<template>\n\t<NcActionButton v-if=\"shouldFavoriteSelection\"\n\t\t:close-after-click=\"true\"\n\t\t:aria-label=\"t('photos', 'Mark selection as favorite')\"\n\t\t@click=\"favoriteSelection\">\n\t\t{{ t('photos', 'Add selection to favorites') }}\n\t\t<Star slot=\"icon\" />\n\t</NcActionButton>\n\t<NcActionButton v-else\n\t\t:close-after-click=\"true\"\n\t\t:aria-label=\"t('photos', 'Remove selection from favorites')\"\n\t\t@click=\"unFavoriteSelection\">\n\t\t{{ t('photos', 'Remove selection from favorites') }}\n\t\t<Star slot=\"icon\" />\n\t</NcActionButton>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\nimport Star from 'vue-material-design-icons/Star'\n\nimport { NcActionButton } from '@nextcloud/vue'\n\nexport default {\n\tname: 'ActionFavorite',\n\tcomponents: {\n\t\tStar,\n\t\tNcActionButton,\n\t},\n\n\tprops: {\n\t\tselectedFileIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'files',\n\t\t]),\n\n\t\t/** @return {boolean} */\n\t\tshouldFavoriteSelection() {\n\t\t\t// Favorite all selection if at least one file is not in the favorites.\n\t\t\treturn this.selectedFileIds.some((fileId) => this.files[fileId].favorite === 0)\n\t\t},\n\t},\n\n\tmethods: {\n\t\t...mapActions([\n\t\t\t'toggleFavoriteForFiles',\n\t\t]),\n\n\t\tasync favoriteSelection() {\n\t\t\tawait this.toggleFavoriteForFiles({ fileIds: this.selectedFileIds, favoriteState: 1 })\n\t\t},\n\n\t\tasync unFavoriteSelection() {\n\t\t\tawait this.toggleFavoriteForFiles({ fileIds: this.selectedFileIds, favoriteState: 0 })\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionFavorite.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionFavorite.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActionFavorite.vue?vue&type=template&id=16c16c0a&\"\nimport script from \"./ActionFavorite.vue?vue&type=script&lang=js&\"\nexport * from \"./ActionFavorite.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["name","computed","fileIdsByMonth","filesByMonth","this","fetchedFileIds","fileId","file","files","month","push","fileid","Object","keys","forEach","sort","sortFilesByTimestamp","monthsList","month1","month2","methods","fileId1","fileId2","timestamp","i","components","Star","NcActionButton","props","selectedFileIds","type","required","mapGetters","shouldFavoriteSelection","mapActions","favoriteSelection","fileIds","favoriteState","unFavoriteSelection","_vm","_c","_self","attrs","t","on","_v","_s","slot"],"sourceRoot":""}